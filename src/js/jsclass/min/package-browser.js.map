{"version":3,"file":"package-browser.js","sources":["../src/package-browser.js"],"names":["JS","this","Date","factory","$","global","E","exports","Package","loader","_index","_loader","_names","OrderedSet","_deps","_uses","_styles","_observers","_events","displayName","toString","log","message","debug","window","runtime","trace","console","info","resolve","filename","test","root","ROOT","replace","list","_members","i","n","length","push","prototype","item","key","undefined","id","index","hasOwnProperty","Deferred","_status","_value","_callbacks","callback","context","call","succeed","value","shift","ENV","onerror","e","_throw","Error","instance","methods","pair","method","arguments","provides","_getFromCache","pkg","styling","setup","block","_onload","_on","eventType","_load","_fire","_isLoaded","withExceptions","__isLoaded","name","object","names","_getObject","_exports","_prefetch","allDeps","concat","source","_source","self","when","load","complete","loadNext","fireOnLoad","loadFile","loadStyle","styles","Array","fetch","join","eventTable","event","packages","eventList","objects","waiting","_getByName","globalPackage","_autoIncrement","_indexByPath","_indexByName","_autoloaders","_getByPath","path","slice","cached","autoloaded","_manufacture","placeholder","remove","_autoload","pattern","options","autoloader","autoloaders","from","m","a","b","toLowerCase","require","requires","rootObject","obj","part","parts","split","BrowserLoader","HOST_REGEX","usable","phantom","__FILE__","scripts","document","getElementsByTagName","src","url","location","href","origin","cacheBust","cache","token","getTime","originalPath","HOST","exec","host","xhr","ActiveXObject","XMLHttpRequest","open","onreadystatechange","readyState","_K","responseText","send","fireCallbacks","head","script","createElement","type","code","execute","Function","onload","state","status","appendChild","link","rel","DSL","file","files","apply","autoload","declaration","parseLoadArgs","args","Packages"],"mappings":"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"}